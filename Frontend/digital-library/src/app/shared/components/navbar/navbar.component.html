<mat-toolbar color="primary">
  <button mat-button [routerLink]="['']" class="app-title">
    <mat-icon fontIcon="book"></mat-icon>Digital Library
  </button>
  <span class="spacer"></span>
  <button
    mat-button
    [routerLink]="['']"
    routerLinkActive="active"
    class="nav-link"
  >
    <mat-icon fontIcon="home"></mat-icon>Home
  </button>

  <!--If logged in user is admin-->
  @if(authService.isAdmin$ | async){
  <ng-container *ngTemplateOutlet="adminMenu"></ng-container>
  } 
  
  @if((authService.user$ | async) === null) {
  <ng-container *ngTemplateOutlet="menu"></ng-container>
  } @else{
  <button mat-button class="nav-link">
    <mat-icon fontIcon="account_circle"></mat-icon
    >{{ (authService.user$ | async)?.firstname }}
  </button>
  <button mat-button class="nav-link" (click)="logout()">Logout</button>
  }
</mat-toolbar>

<ng-template #adminMenu>
  <button mat-button [matMenuTriggerFor]="menu" class="nav-link">
    <mat-icon>settings</mat-icon>Admin
  </button>
  <mat-menu #menu="matMenu">
    <button
      mat-menu-item
      [routerLink]="['admin/category']"
      routerLinkActive="active"
    >
      <mat-icon>category</mat-icon>
      <span>Categories</span>
    </button>
    <button
      mat-menu-item
      [routerLink]="['/admin/userstocategory']"
      routerLinkActive="active"
    >
      <mat-icon>group</mat-icon>
      <span>Users to Category</span>
    </button>
    <mat-divider></mat-divider>
    <button
      mat-menu-item
      [routerLink]="['/admin/media-type']"
      routerLinkActive="active"
    >
      <mat-icon>perm_media</mat-icon>
      <span>Media types</span>
    </button>
  </mat-menu>
</ng-template>

<ng-template #menu>
  <button
    mat-button
    [routerLink]="['/login']"
    routerLinkActive="active"
    class="nav-link"
  >
    Login
  </button>
  <button
    mat-button
    [routerLink]="['login/register']"
    routerLinkActive="active"
    class="nav-link"
  >
    Register
  </button>
</ng-template>
